{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user/user.service\";\nimport * as i2 from \"src/app/services/sneaker/sneaker.service\";\nimport * as i3 from \"src/app/services/favorites.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\n\nconst _c0 = function (a1) {\n  return [\"/sneakers\", a1];\n};\n\nfunction FavoritesComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelementStart(1, \"div\", 7);\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵelementStart(3, \"div\", 9);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"img\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"hr\");\n    i0.ɵɵelementStart(7, \"div\", 11);\n    i0.ɵɵelementStart(8, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_div_9_Template_button_click_8_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.currentItem = ctx_r3.getValueToDelete($event);\n    });\n    i0.ɵɵtext(9, \" Supprim\\u00E9 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 13);\n    i0.ɵɵtext(11, \" D\\u00E9tails \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sneakerItem_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", sneakerItem_r1.label, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", sneakerItem_r1.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", sneakerItem_r1.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, sneakerItem_r1.id));\n  }\n}\n\nexport let FavoritesComponent = /*#__PURE__*/(() => {\n  class FavoritesComponent {\n    constructor(userService, sneakerService, favorisService) {\n      this.userService = userService;\n      this.sneakerService = sneakerService;\n      this.favorisService = favorisService;\n      this.test = {\n        \"@context\": \"\",\n        \"@id\": \"\",\n        \"@type\": \"\",\n        \"email\": \"\",\n        \"favorites\": [],\n        \"firstname\": \"\",\n        \"inventories\": [],\n        \"lastname\": \"\"\n      };\n      this.sneakerList = [];\n      this.arrayOfFav = [];\n      this.favArrayURI = [];\n      this.currentItem = '';\n    }\n\n    ngOnInit() {\n      this.getUserInfosFav();\n    }\n\n    ngOnChange() {\n      this.arrayOfFav;\n    }\n\n    getUserInfosFav() {\n      const idUser = this.userService.decodeToken().id;\n      return this.userService.getUserFavoris(idUser).subscribe({\n        next: v => {\n          Object.entries(v).forEach(([key, value]) => {\n            this.arrayOfFav.push(parseInt(value.idSneaker));\n            this.favArrayURI.push(value);\n          });\n          this.arrayOfFav.forEach(val => {\n            return this.sneakerService.get(val).subscribe(sneakerItem => {\n              for (const value of Object.values(sneakerItem)) {\n                this.sneakerList.push(value);\n              }\n            });\n          });\n        },\n        error: e => console.error(e),\n        complete: () => console.info('complete')\n      });\n    }\n\n    deleteFav() {\n      const idUser = this.userService.decodeToken().id;\n      this.userService.updateUserAccount(idUser);\n    }\n\n    myClickFunction(event) {\n      console.log(event);\n    }\n\n    getValueToDelete(event) {\n      const valueClickedOn = event.target.value;\n      Object.entries(this.favArrayURI).forEach(([key, value]) => {\n        const regex = /(\\d+)/g; // console.log(key , value[\"@id\"])\n\n        const getFavId = value[\"@id\"];\n        const result = getFavId.match(regex); // \n\n        if (parseInt(value.idSneaker) === parseInt(valueClickedOn)) {\n          console.log(value.idSneaker, valueClickedOn);\n          console.log(result[0]);\n          this.favorisService.delete(parseInt(result[0])).subscribe({});\n        }\n      });\n      return event.target.value;\n    }\n\n  }\n\n  FavoritesComponent.ɵfac = function FavoritesComponent_Factory(t) {\n    return new (t || FavoritesComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.SneakerService), i0.ɵɵdirectiveInject(i3.FavoritesService));\n  };\n\n  FavoritesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FavoritesComponent,\n    selectors: [[\"app-favorites\"]],\n    decls: 10,\n    vars: 1,\n    consts: [[1, \"shadow\", \"sm:rounded-md\", \"sm:overflow-hidden\"], [1, \"bg-white\", \"py-6\", \"px-4\", \"space-y-6\", \"sm:p-6\"], [1, \"text-lg\", \"leading-6\", \"font-medium\", \"text-gray-900\"], [1, \"mt-1\", \"text-sm\", \"text-gray-500\"], [1, \"flex\", \"flex-row\", \"flex-wrap\", \"justify-center\", \"sm:justify-between\", \"gap-5\"], [\"class\", \"\", 4, \"ngFor\", \"ngForOf\"], [1, \"\"], [1, \"rounded\", \"overflow-hidden\", \"bg-gray-100\", \"max-w-fit\"], [1, \"px-6\", \"py-4\"], [1, \"text-base\", \"mb-2\", \"text-gray-900\"], [\"alt\", \"Images of different sneakers\", 1, \"w-72\", \"object-center\", \"object-cover\", \"group-hover:opacity-75\", \"rounded\", 3, \"src\"], [1, \"px-6\", \"py-4\", \"flex\", \"flex-row\", \"justify-evenly\"], [\"type\", \"submit\", 1, \"ml-3\", \"inline-flex\", \"justify-center\", \"py-2\", \"px-4\", \"border\", \"border-transparent\", \"shadow-sm\", \"text-sm\", \"font-medium\", \"rounded-md\", \"text-white\", \"bg-orange-500\", \"hover:bg-orange-600\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", 3, \"value\", \"click\"], [\"type\", \"submit\", 1, \"ml-3\", \"inline-flex\", \"justify-center\", \"py-2\", \"px-4\", \"border\", \"border-transparent\", \"shadow-sm\", \"text-sm\", \"font-medium\", \"rounded-md\", \"text-white\", \"bg-orange-500\", \"hover:bg-orange-600\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", 3, \"routerLink\"]],\n    template: function FavoritesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"h3\", 2);\n        i0.ɵɵtext(3, \" Votre favoris \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"span\");\n        i0.ɵɵelementStart(5, \"p\", 3);\n        i0.ɵɵtext(6, \" Vous pourrez gerer vos favoris ici. Supprim\\u00E9 ou ajouter des paires dans vos favoris. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"hr\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 4);\n        i0.ɵɵtemplate(9, FavoritesComponent_div_9_Template, 12, 6, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sneakerList);\n      }\n    },\n    directives: [i4.NgForOf, i5.RouterLink],\n    styles: [\"\"]\n  });\n  return FavoritesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}