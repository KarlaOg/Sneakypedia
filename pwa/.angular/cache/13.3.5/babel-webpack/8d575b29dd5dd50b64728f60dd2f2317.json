{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/sneaker/sneaker.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/services/favorites.service\";\nimport * as i4 from \"src/app/services/inventory.service\";\nimport * as i5 from \"src/app/services/user/user.service\";\nimport * as i6 from \"src/app/services/error.service\";\nimport * as i7 from \"@angular/common\";\n\nfunction SneakerDetailsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorService.handleError, \" \");\n  }\n}\n\nfunction SneakerDetailsComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵelementStart(1, \"span\", 18);\n    i0.ɵɵelementStart(2, \"span\", 19);\n    i0.ɵɵelementStart(3, \"a\", 20);\n    i0.ɵɵtext(4, \" Connectez-vous\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \" pour int\\u00E9ragir avec cette paire de SNEAKER ! \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SneakerDetailsComponent_ng_template_26_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function SneakerDetailsComponent_ng_template_26_div_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.addFavoris();\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 27);\n    i0.ɵɵelement(3, \"path\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r4.statusUser === false);\n  }\n}\n\nfunction SneakerDetailsComponent_ng_template_26_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 29);\n    i0.ɵɵtext(1, \" D\\u00E9j\\u00E0 en favoris \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SneakerDetailsComponent_ng_template_26_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function SneakerDetailsComponent_ng_template_26_div_4_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.addInventory();\n    });\n    i0.ɵɵtext(2, \" J'ai cop ! \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r7.statusUser === false);\n  }\n}\n\nfunction SneakerDetailsComponent_ng_template_26_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 31);\n    i0.ɵɵtext(1, \" D\\u00E9j\\u00E0 COP \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a1) {\n  return [\"/sneaker\", a1, \"modify\"];\n};\n\nfunction SneakerDetailsComponent_ng_template_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, SneakerDetailsComponent_ng_template_26_div_1_Template, 4, 1, \"div\", 22);\n    i0.ɵɵtemplate(2, SneakerDetailsComponent_ng_template_26_ng_template_2_Template, 2, 0, \"ng-template\", null, 23, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(4, SneakerDetailsComponent_ng_template_26_div_4_Template, 3, 1, \"div\", 22);\n    i0.ɵɵtemplate(5, SneakerDetailsComponent_ng_template_26_ng_template_5_Template, 2, 0, \"ng-template\", null, 24, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(7, \"button\", 25);\n    i0.ɵɵtext(8, \" Modifier la paire \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r5 = i0.ɵɵreference(3);\n\n    const _r8 = i0.ɵɵreference(6);\n\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.sneakerAddedFav === false)(\"ngIfElse\", _r5);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.sneakerAddedInventory === false)(\"ngIfElse\", _r8);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r3.statusUser === false)(\"routerLink\", i0.ɵɵpureFunction1(6, _c0, ctx_r3.id));\n  }\n}\n\nexport let SneakerDetailsComponent = /*#__PURE__*/(() => {\n  class SneakerDetailsComponent {\n    constructor(sneakerService, route, favorisService, inventoryService, userService, errorService, router) {\n      this.sneakerService = sneakerService;\n      this.route = route;\n      this.favorisService = favorisService;\n      this.inventoryService = inventoryService;\n      this.userService = userService;\n      this.errorService = errorService;\n      this.router = router;\n      this.sneakerAddedFav = false;\n      this.sneakerAddedInventory = false;\n      this.messageSneaker = '';\n      this.detailsItem = {\n        id: 0,\n        label: '',\n        image: '',\n        release_date: '',\n        description: '',\n        price: 0\n      };\n    }\n\n    ngOnInit() {\n      this.getDetailProducts();\n      this.isUserLogIn();\n      this.checkIfFav();\n      this.checkIfInInventory();\n    }\n\n    ngOnChanges() {}\n\n    getIdSneakers() {\n      this.sub = this.route.params.subscribe(params => {\n        this.id = +params['id'];\n      });\n      return this.id !== undefined ? this.id : 0;\n    }\n\n    getDetailProducts() {\n      return this.sneakerService.get(this.getIdSneakers()).subscribe({\n        next: detailSneaker => {\n          for (const value of Object.values(detailSneaker)) {\n            return this.detailsItem = {\n              id: value.id,\n              description: value.description,\n              label: value.label,\n              image: value.image,\n              price: value.price,\n              release_date: value.release_date\n            };\n          }\n\n          this.messageSneaker = \"Paire ajouter\";\n          return;\n        },\n        error: e => console.error(e),\n        complete: () => console.info('complete')\n      });\n    }\n\n    addFavoris() {\n      this.errorService.handleError;\n      const idSneaker = this.getIdSneakers();\n      const idUser = this.userService.decodeToken().id;\n      const currentUserFavoris = {\n        'userId': [`/api/users/${idUser.toString()}`],\n        'idSneaker': idSneaker.toString()\n      };\n      console.log(currentUserFavoris);\n      this.favorisService.create(currentUserFavoris).subscribe({\n        error: e => this.error = e,\n        complete: () => this.router.navigateByUrl(\"/compte/favoris\")\n      });\n    }\n\n    addInventory() {\n      this.errorService.handleError;\n      const idSneaker = this.getIdSneakers();\n      const idUser = this.userService.decodeToken().id;\n      const currentUserInventory = {\n        'idUser': [`/api/users/${idUser.toString()}`],\n        'idSneaker': idSneaker.toString()\n      };\n      this.inventoryService.create(currentUserInventory).subscribe({\n        error: e => this.error = e,\n        complete: () => this.router.navigateByUrl(\"/compte/inventaire\")\n      });\n    }\n\n    isUserLogIn() {\n      this.userService.isLoggedIn.subscribe(value => this.statusUser = value);\n    }\n\n    checkIfFav() {\n      const idUser = this.userService.decodeToken().id;\n      this.userService.getUserFavoris(idUser).subscribe({\n        next: item => {\n          for (const value of Object.values(item)) {\n            if (parseInt(value.idSneaker) === this.id) {\n              return this.sneakerAddedFav = true;\n            }\n          }\n\n          return this.sneakerAddedFav;\n        },\n        error: e => console.error(e),\n        complete: () => console.info('complete')\n      });\n    }\n\n    checkIfInInventory() {\n      const idUser = this.userService.decodeToken().id;\n      this.userService.getUserInventory(idUser).subscribe({\n        next: listOfItem => {\n          for (const value of Object.values(listOfItem)) {\n            if (parseInt(value.idSneaker) === this.id) {\n              return this.sneakerAddedInventory = true;\n            }\n          }\n\n          return this.sneakerAddedInventory;\n        },\n        error: e => console.error(e),\n        complete: () => console.info('complete')\n      });\n    }\n\n  }\n\n  SneakerDetailsComponent.ɵfac = function SneakerDetailsComponent_Factory(t) {\n    return new (t || SneakerDetailsComponent)(i0.ɵɵdirectiveInject(i1.SneakerService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.FavoritesService), i0.ɵɵdirectiveInject(i4.InventoryService), i0.ɵɵdirectiveInject(i5.UserService), i0.ɵɵdirectiveInject(i6.ErrorService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  SneakerDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SneakerDetailsComponent,\n    selectors: [[\"app-sneaker-details\"]],\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 28,\n    vars: 8,\n    consts: [[1, \"bg-white\", \"pt-16\"], [\"class\", \"p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-200 dark:text-red-800\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"max-w-2xl\", \"mx-auto\", \"pt-10\", \"pb-16\", \"px-4\", \"sm:px-6\", \"lg:max-w-7xl\", \"lg:pt-16\", \"lg:pb-24\", \"lg:px-8\", \"grid\", \"lg:grid-cols-3\", \"grid-cols-2\", \"lg:gap-x-8\"], [1, \"col-span-2\", \"lg:pr-8\"], [1, \"text-2xl\", \"font-extrabold\", \"tracking-tight\", \"text-gray-900\", \"sm:text-3xl\"], [1, \"text-3xl\", \"text-gray-900\"], [1, \"col-span-2\", \"py-0lg:pt-6\", \"lg:pb-16\", \"lg:pr-8\", \"border-r\"], [1, \"mt-6\", \"max-w-2xl\", \"mx-auto\", \"lg:max-w-7xl\", \"lg:gap-x-8\", \"py-6\"], [1, \"overflow-hidden\", \"lg:block\"], [\"alt\", \"Image of sneakers\", 1, \"rounded-md\", \"object-cover\", \"h-96\", 3, \"src\"], [1, \"text-xl\", \"font-medium\", \"text-gray-900\"], [1, \"text-base\", \"text-gray-600\"], [1, \"mt-10\", \"col-span-2\", \"sm:w-full\", \"lg:col-span-1\"], [1, \"mt-4\", \"space-y-6\"], [\"class\", \"text-xl font-semibold italic text-gray-600\", 4, \"ngIf\", \"ngIfElse\"], [\"showActions\", \"\"], [\"role\", \"alert\", 1, \"p-4\", \"mb-4\", \"text-sm\", \"text-red-700\", \"bg-red-100\", \"rounded-lg\", \"dark:bg-red-200\", \"dark:text-red-800\"], [1, \"text-xl\", \"font-semibold\", \"italic\", \"text-gray-600\"], [1, \"before:block\", \"before:absolute\", \"before:-inset-1\", \"before:-skew-y-3\", \"before:bg-orange-600\", \"relative\", \"inline-block\"], [1, \"relative\", \"text-white\"], [\"routerLink\", \"/connexion\"], [1, \"mt-4\", \"lg:mt-0\"], [4, \"ngIf\", \"ngIfElse\"], [\"alreadyFaved\", \"\"], [\"alreadyInInventory\", \"\"], [\"type\", \"submit\", 1, \"mt-10\", \"w-full\", \"bg-orange-600\", \"border\", \"border-transparent\", \"rounded-md\", \"py-3\", \"px-8\", \"flex\", \"items-center\", \"justify-center\", \"text-base\", \"font-medium\", \"text-white\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", \"focus:ring-gray-400\", 3, \"disabled\", \"routerLink\"], [\"title\", \"favoris\", \"type\", \"submit\", 1, \"mt-10\", \"w-full\", \"bg-orange-600\", \"border\", \"border-transparent\", \"rounded-md\", \"py-3\", \"px-8\", \"flex\", \"items-center\", \"justify-center\", \"text-base\", \"font-medium\", \"text-white\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", \"focus:ring-gray-400\", \"pl-2\", 3, \"disabled\", \"click\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", 1, \"h-6\", \"w-6\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"], [\"disabled\", \"\", \"type\", \"submit\", 1, \"mt-10\", \"w-full\", \"bg-gray-600\", \"border\", \"border-transparent\", \"rounded-md\", \"py-3\", \"px-8\", \"flex\", \"items-center\", \"justify-center\", \"text-base\", \"font-medium\", \"text-white\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", \"focus:ring-gray-400\"], [\"title\", \"Inventory\", \"type\", \"submit\", 1, \"mt-10\", \"w-full\", \"bg-orange-600\", \"border\", \"border-transparent\", \"rounded-md\", \"py-3\", \"px-8\", \"flex\", \"items-center\", \"justify-center\", \"text-base\", \"font-medium\", \"text-white\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", \"focus:ring-gray-400\", 3, \"disabled\", \"click\"], [\"type\", \"submit\", 1, \"mt-10\", \"w-full\", \"bg-gray-600\", \"border\", \"border-transparent\", \"rounded-md\", \"py-3\", \"px-8\", \"flex\", \"items-center\", \"justify-center\", \"text-base\", \"font-medium\", \"text-white\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-offset-2\", \"focus:ring-gray-400\"]],\n    template: function SneakerDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, SneakerDetailsComponent_div_1_Template, 2, 1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\");\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"h1\", 4);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"p\", 5);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵelementStart(10, \"div\", 7);\n        i0.ɵɵelementStart(11, \"div\", 8);\n        i0.ɵɵelement(12, \"img\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\");\n        i0.ɵɵelementStart(14, \"h2\", 10);\n        i0.ɵɵtext(15, \"Date de sortie\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"p\", 11);\n        i0.ɵɵtext(17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"br\");\n        i0.ɵɵelementStart(19, \"h2\", 10);\n        i0.ɵɵtext(20, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"p\", 11);\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 12);\n        i0.ɵɵelementStart(24, \"div\", 13);\n        i0.ɵɵtemplate(25, SneakerDetailsComponent_div_25_Template, 6, 0, \"div\", 14);\n        i0.ɵɵtemplate(26, SneakerDetailsComponent_ng_template_26_Template, 9, 8, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r2 = i0.ɵɵreference(27);\n\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.detailsItem.label, \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\", ctx.detailsItem.price, \"\\u20AC\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.detailsItem.image, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.detailsItem.release_date, \" \");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.detailsItem.description || \"Pas de description pour l'instant\", \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.statusUser === false)(\"ngIfElse\", _r2);\n      }\n    },\n    directives: [i7.NgIf, i2.RouterLinkWithHref, i2.RouterLink],\n    styles: [\"\"]\n  });\n  return SneakerDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}